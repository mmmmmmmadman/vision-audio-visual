# VAV 影片檔案載入功能

## 功能說明

VAV 系統現在支援使用影片檔案作為視覺輸入來源，除了原有的相機輸入外，也可以載入預錄影片進行即時視覺化處理。

## 支援格式

- MP4 (.mp4)
- AVI (.avi)
- MOV (.mov)
- MKV (.mkv)

## 使用方式

### 載入影片

1. 啟動 VAV 系統並按下 **Start** 開始執行
2. 點擊 **Load Video** 按鈕
3. 在檔案對話框中選擇影片檔案
4. 系統會自動:
   - 偵測影片解析度和幀率
   - 調整處理管線適應新解析度
   - 以迴圈模式播放影片

### 切回相機

1. 點擊 **Switch to Camera** 按鈕
2. 系統會自動切回預設相機輸入

## 技術細節

### 解析度處理

- 系統自動適應不同解析度輸入 (例如從 1920x1080 切換到 3840x2160)
- ContourScanner 會在解析度變化時重置內部狀態
- OpenGL renderer 動態調整座標轉換確保視覺元素位置正確

### 效能考量

- 影片讀取採用背景執行緒避免阻塞主執行緒
- 高解析度影片會增加輪廓偵測計算時間
- 建議使用 1920x1080 或 2K 解析度以維持即時效能

### 音訊處理

- 切換輸入源時音訊處理保持運行不中斷
- 確保視覺與聲音同步不受影響

## 注意事項

1. 首次載入大檔案影片時可能需要幾秒鐘初始化
2. 影片播放採用循環模式無法暫停或調整播放位置
3. 切換輸入源時畫面會短暫更新請稍待
4. 4K 影片可能導致效能下降建議使用 2K 以下解析度

## 故障排除

### 影片無法載入

- 確認檔案格式受支援
- 確認檔案路徑沒有特殊字元
- 嘗試使用其他影片檔案

### 畫面卡頓

- 降低影片解析度
- 調整 ContourScanner 參數減少計算負擔
- 檢查 CPU 使用率

### 切換失敗

- 重新啟動程式
- 確認相機沒有被其他程式佔用
